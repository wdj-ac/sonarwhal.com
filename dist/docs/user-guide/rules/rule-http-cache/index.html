<!doctype html><html lang="en"><head><meta charset="utf-8"><title>HTTP Cache | sonarwhal documentation</title> <meta property="og:image" content="/static/images/apple-touch-icon-c01d89d4f3.png"><meta property="og:description" content="http-cache verifies that the page and all its resources follow a good,sustainable caching strategy."><meta property="og:title" content="HTTP Cache"><meta name="description" content="http-cache verifies that the page and all its resources follow a good,sustainable caching strategy."><meta name="viewport" content="width=device-width"><meta name="theme-color" content="#4046dd"><link rel="manifest" href="/static/site-b1a71cb190.webmanifest"><link rel="apple-touch-icon" href="/static/images/apple-touch-icon-c01d89d4f3.png"><link type="application/opensearchdescription+xml" rel="search" href="/static/opensearch-eaec25f991.xml" title="sonarwhal"><link rel="icon" href="/static/images/favicon-dd9d5dff4e.ico"> <link rel="stylesheet" href="/static/styles/common-f0d599dc94.css" integrity="sha384-FrUPgIHFNLSd41g3b26WzegsfNG/Yz4Qp63Xemf2nMMv1XrfbYJU9Dn81AMrYj2u" crossorigin="anonymous"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat:200,300,400,500" integrity="sha384-6hCj8YZdGj+SQ9wB8ShBR1XRd+tUsQSfKu1i4C72EaUKO6AeEipi63+OPsdZPLoD" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css" integrity="sha384-mHx5KeR3zcLviQFPmpHqrwf2uxtukRvUFVzOMOqIjKjSNrurxlmJ3oS+vm49Mz07" crossorigin="anonymous"><link rel="stylesheet" href="/static/styles/docs-aea1404a6b.css" integrity="sha384-Joq3wpwZ1GpeoibnNAx67vRhmwjvkm2yZ5Nq3L3n/XdiPFHORf/yu0GxMEbztADd" crossorigin="anonymous"></head><body><header class="header"><div class="header-social"><div class="header-social__container container"><img src="/static/images/jsf_logo_white-a73061e34d.svg" alt="A JS Foundation Project"><ul class="header-social__list"><li class="github-icon"><a href="https://github.com/sonarwhal" aria-label="Follow sonarwhal on GitHub"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 25 25"><path class="github-icon-svg-header" d="M12.5.4C5.7.4.2 5.9.2 12.7c0 5.4 3.5 10 8.4 11.7.6.1.8-.3.8-.6v-2.1C6 22.4 5.3 20 5.3 20c-.6-1.4-1.4-1.8-1.4-1.8-1.1-.7.1-.7.1-.7 1.2.1 1.9 1.3 1.9 1.3 1.1 1.9 2.9 1.3 3.6 1 .1-.8.4-1.3.8-1.6-2.7-.3-5.6-1.4-5.6-6.1 0-1.3.5-2.4 1.3-3.3-.2-.4-.6-1.6 0-3.3 0 0 1-.3 3.4 1.3 1-.3 2-.4 3.1-.4 1 0 2.1.1 3.1.4C17.9 5.2 19 5.5 19 5.5c.7 1.7.2 2.9.1 3.3.8.9 1.3 2 1.3 3.3 0 4.7-2.9 5.8-5.6 6.1.4.4.8 1.1.8 2.3v3.4c0 .3.2.7.8.6 4.9-1.6 8.4-6.2 8.4-11.7C24.8 5.9 19.3.4 12.5.4"/></svg></a></li><li class="twitter-icon"><a href="https://twitter.com/narwhalnellie" aria-label="Follow sonarwhal on Twitter"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 25 24"><path class="twitter-icon-svg-header" d="M25 4.4c-.9.4-1.9.7-2.9.8 1-.6 1.8-1.6 2.2-2.8-1 .6-2.1 1-3.2 1.2-.9-1-2.2-1.6-3.7-1.6-2.8 0-5 2.3-5 5 0 .4 0 .8.1 1.2C8.3 8 4.6 6 2.1 2.9c-.4.8-.7 1.6-.7 2.6 0 1.8.9 3.3 2.2 4.2-.8-.1-1.5-.3-2.2-.7v.1c0 2.4 1.7 4.5 4.1 5-.4.1-.9.2-1.3.2-.3 0-.6 0-.9-.1.6 2 2.5 3.5 4.7 3.5-1.9 1.3-4 2.1-6.4 2.1-.4 0-.8 0-1.2-.1C2.6 21.2 5.3 22 8.1 22c9.3 0 14.4-7.7 14.4-14.4v-.7c1-.6 1.8-1.5 2.5-2.5"/></svg></a></li><li class="medium-icon"><a href="https://medium.com/sonarwhal" aria-label="Follow sonarwhal on Medium"><svg xmlns="http://www.w3.org/2000/svg" viewbox="4 2 40 40"><path class="medium-icon-svg-header" d="M5 40V5h35v35H5zm8.56-12.63c0 .56-.03.7-.32 1.03l-2.45 3v.38h6.9v-.4l-2.4-2.98c-.3-.34-.35-.5-.35-1.03v-8.95l6.13 13.36h.7L27 18.42v10.64c0 .3 0 .35-.2.53L25 31.4v.37h9.2v-.4l-1.82-1.8c-.2-.17-.22-.23-.22-.52v-13.1c0-.3.03-.36.2-.54l1.83-1.8v-.32h-6.5L23.1 24.8l-5.2-11.55h-6.8v.4l2.14 2.63c.24.3.3.37.3.77V27.4z"/></svg></a></li></ul></div></div><div class="nav-bar container"><nav class="nav"><a href="/" class="clear logo--container"><img src="/static/images/sonar-logo-4fa31d71a3.svg" alt="sonarwhal" class="header__logo navbar__navitem"></a><ul class="nav__navbar"><li class="navbar__navitem"><a role="button" href="/scanner/" id="scanner" aria-haspopup="true" aria-expanded="false" aria-controls="submenu-scanner" class="navitem__button ">Scanner</a> </li><li class="navbar__navitem"><a role="button" href="/docs/" id="docs" aria-haspopup="true" aria-expanded="false" aria-controls="submenu-docs" class="navitem__button expandable">Documentation</a> <ul role="group" id="submenu-docs" class="navbar__submenu" aria-hidden="true"><li><a href="/docs/contributor-guide/">Contributor Guide</a></li><li><a href="/docs/user-guide/rules/">Rules</a></li><li><a href="/docs/user-guide/">User Guide</a></li></ul></li><li class="navbar__navitem"><a role="button" href="/about/" id="about" aria-haspopup="true" aria-expanded="false" aria-controls="submenu-about" class="navitem__button expandable">About</a> <ul role="group" id="submenu-about" class="navbar__submenu" aria-hidden="true"><li><a href="/about/faq/">FAQ</a></li><li><a href="/about/changelog/">Changelog</a></li><li><a href="/about/governance/">Governance</a></li><li><a href="https://js.foundation/community/code-of-conduct">Code of Conduct</a></li></ul></li></ul><div class="nav-bar--container"><div class="nav-bar__input"><form action="/search" method="GET"><label for="search-input" class="visually-hidden">Search the documentation</label><input type="search" id="search-input" placeholder="Search Documentation" name="q" aria-label="Search"> <button type="submit" aria-label="search" class="button-search"></button></form></div><button class="mobile-close-button" aria-label="Close Search Overlay">Close</button></div><div class="nav-bar--mobile-buttons"><button class="header__toggle mobile-nav-button" aria-label="Menu"></button> <button class="header__toggle mobile-search-button" aria-label="Search"></button></div></nav></div></header><main class="container">   <article class="content" aria-labelledby="page-heading"><nav class="breadcrumb" aria-label="breadcrumbs"><ul><li><a href="/">Home</a></li><li><a href="../../../">Documentation</a></li><li><a href="../../" class="guide-category">User guide</a></li><li aria-current="location">HTTP Cache</li></ul></nav><header class="page-intro"><h1 id="page-heading">HTTP Cache</h1><div class="documentation-actions"><ul><li><a target="_blank" href="https://github.com/sonarwhal/sonarwhal/edit/master/packages/rule-http-cache/README.md">Edit</a></li><li><a target="_blank" href="https://github.com/sonarwhal/sonarwhal/issues/new?title=%5Bdocs%5D%20Issue%20with%20&apos;HTTP%20Cache&apos;&amp;body=https%3A%2F%2Fsonarwhal.com%2Fdocs%2Fuser-guide%2Frules%2Frule-http-cache%2Findex.html">Signal Issue</a></li></ul></div></header><div class="section" id="main"><div class="layout layout--sidebar"><div class="module module--secondary mobile-view"><ul class="toc-mobile-view"><li><p role="button" id="mobile-toc" aria-controls="mobile-toc-submenu" aria-expanded="false" aria-haspopup="true" class="toc-mobile-view__button expandable">User guide</p><ul role="group" class="toc-mobile-view__dropdown" id="mobile-toc-submenu" aria-hidden="true"><li class="dropdown__subitem"><a href="../../" class="subitem--single">Getting Started</a></li> <li class="dropdown__subitem"><p>concepts</p><ul><li class="subitem"><a href="/docs/user-guide/concepts/configurations/">Configurations</a></li><li class="subitem"><a href="/docs/user-guide/concepts/connectors/">Connectors</a></li><li class="subitem"><a href="/docs/user-guide/concepts/formatters/">Formatters</a></li><li class="subitem"><a href="/docs/user-guide/concepts/parsers/">Parsers</a></li><li class="subitem"><a href="/docs/user-guide/concepts/rules/">Rules</a></li></ul></li><li class="dropdown__subitem"><p>further configuration</p><ul><li class="subitem"><a href="/docs/user-guide/further-configuration/sonarwhalrc-formats/">.sonarwhalrc formats</a></li><li class="subitem"><a href="/docs/user-guide/further-configuration/browser-context/">Browser configuration</a></li><li class="subitem"><a href="/docs/user-guide/further-configuration/ignoring-domains/">Ignoring domains</a></li><li class="subitem"><a href="/docs/user-guide/further-configuration/rules-timeout/">Rules timeout</a></li><li class="subitem"><a href="/docs/user-guide/further-configuration/website-authentication/">Website authentication</a></li></ul></li><li class="dropdown__subitem"><p>rules</p><ul><li class="subitem"><a href="/docs/user-guide/rules/rule-amp-validator/">AMP HTML Validator</a></li><li class="subitem"><a href="/docs/user-guide/rules/rule-axe/">Accessibility assessment with aXe</a></li><li class="subitem"><a href="/docs/user-guide/rules/rule-no-http-redirects/">Avoid HTTP redirects in requests</a></li><li class="subitem"><a href="/docs/user-guide/rules/rule-no-disallowed-headers/">Disallow certain HTTP headers</a></li><li class="subitem"><a href="/docs/user-guide/rules/rule-manifest-file-extension/">Disallow non-standard file extension for the web app manifest file</a></li><li class="subitem"><a href="/docs/user-guide/rules/rule-no-protocol-relative-urls/">Disallow protocol-relative URLs</a></li><li class="subitem"><a href="/docs/user-guide/rules/rule-no-friendly-error-pages/">Disallow small error pages</a></li><li class="subitem"><a href="/docs/user-guide/rules/rule-no-html-only-headers/">Disallow unneeded HTTP headers for non-HTML resources</a></li><li class="subitem"><a href="/docs/user-guide/rules/rule-http-cache/">HTTP Cache</a></li><li class="subitem"><a href="/docs/user-guide/rules/rule-image-optimization-cloudinary/">Image optimization with Cloudinary</a></li><li class="subitem"><a href="/docs/user-guide/rules/rule-no-vulnerable-javascript-libraries/">No vulnerable libraries</a></li><li class="subitem"><a href="/docs/user-guide/rules/rule-html-checker/">Nu HTML Test</a></li><li class="subitem"><a href="/docs/user-guide/rules/rule-performance-budget/">Performance budget</a></li><li class="subitem"><a href="/docs/user-guide/rules/rule-content-type/">Require `Content-Type` HTTP response header with appropriate value</a></li><li class="subitem"><a href="/docs/user-guide/rules/rule-strict-transport-security/">Require `Strict-Transport-Security` response header</a></li><li class="subitem"><a href="/docs/user-guide/rules/rule-x-content-type-options/">Require `X-Content-Type-Options` HTTP response header</a></li><li class="subitem"><a href="/docs/user-guide/rules/rule-meta-theme-color/">Require a &apos;theme-color&apos; meta tag with a valid value</a></li><li class="subitem"><a href="/docs/user-guide/rules/rule-manifest-exists/">Require a web app manifest file</a></li><li class="subitem"><a href="/docs/user-guide/rules/rule-apple-touch-icons/">Require an apple touch icon</a></li><li class="subitem"><a href="/docs/user-guide/rules/rule-meta-charset-utf-8/">Require charset meta tag with the value of `utf-8`</a></li><li class="subitem"><a href="/docs/user-guide/rules/rule-disown-opener/">Require external links to disown opener</a></li><li class="subitem"><a href="/docs/user-guide/rules/rule-highest-available-document-mode/">Require highest available document mode</a></li><li class="subitem"><a href="/docs/user-guide/rules/rule-manifest-app-name/">Require manifest to specify the web site/app name</a></li><li class="subitem"><a href="/docs/user-guide/rules/rule-http-compression/">Require resources to be served compressed</a></li><li class="subitem"><a href="/docs/user-guide/rules/rule-sri/">Require scripts and styles to use subresource integrity</a></li><li class="subitem"><a href="/docs/user-guide/rules/rule-manifest-is-valid/">Require valid manifest</a></li><li class="subitem"><a href="/docs/user-guide/rules/rule-meta-viewport/">Require viewport meta tag with proper value</a></li><li class="subitem"><a href="/docs/user-guide/rules/rule-ssllabs/">SSL Server Test</a></li><li class="subitem"><a href="/docs/user-guide/rules/rule-validate-set-cookie-header/">Validate `Set-Cookie` Header</a></li><li class="subitem"><a href="/docs/user-guide/rules/rule-no-bom/">Warn if the byte-order mark</a></li><li class="subitem"><a href="/docs/user-guide/rules/rule-webpack-config/config-exists/">`config-exists`</a></li><li class="subitem"><a href="/docs/user-guide/rules/rule-webpack-config/is-installed/">`is-installed`</a></li><li class="subitem"><a href="/docs/user-guide/rules/rule-babel-config/is-valid/">`is-valid`</a></li><li class="subitem"><a href="/docs/user-guide/rules/rule-typescript-config/is-valid/">`is-valid`</a></li><li class="subitem"><a href="/docs/user-guide/rules/rule-webpack-config/is-valid/">`is-valid`</a></li><li class="subitem"><a href="/docs/user-guide/rules/rule-webpack-config/module-esnext-typescript/">`module-esnext-typescript`</a></li><li class="subitem"><a href="/docs/user-guide/rules/rule-webpack-config/modules-false-babel/">`modules-false-babel`</a></li><li class="subitem"><a href="/docs/user-guide/rules/rule-typescript-config/no-comments/">`no-comments`</a></li><li class="subitem"><a href="/docs/user-guide/rules/rule-webpack-config/no-devtool-in-prod/">`no-devtool-in-prod`</a></li><li class="subitem"><a href="/docs/user-guide/rules/rule-typescript-config/target/">`target`</a></li><li class="subitem"><a href="/docs/user-guide/rules/rule-babel-config/">babel-config</a></li><li class="subitem"><a href="/docs/user-guide/rules/rule-typescript-config/">typescript-config</a></li><li class="subitem"><a href="/docs/user-guide/rules/rule-webpack-config/">webpack configuration rules set</a></li></ul></li></ul></li></ul></div><div class="module module--secondary table-of-contents treeview main-view" role="navigation"><ul role="tree" aria-labelledby="page-heading" tabindex="0"><li role="treeitem" aria-label="subsection" tabindex="0" aria-expanded="false"><div class=" toc-section-title "><span class="text">concepts</span> <span class="icon"></span></div><ul role="group"><li role="treeitem" aria-selected="false"><div class=" toc-subsection-title " aria-current=""><a class="text" href="/docs/user-guide/concepts/configurations/" tabindex="-1">Configurations</a></div></li><li role="treeitem" aria-selected="false"><div class=" toc-subsection-title " aria-current=""><a class="text" href="/docs/user-guide/concepts/connectors/" tabindex="-1">Connectors</a></div></li><li role="treeitem" aria-selected="false"><div class=" toc-subsection-title " aria-current=""><a class="text" href="/docs/user-guide/concepts/formatters/" tabindex="-1">Formatters</a></div></li><li role="treeitem" aria-selected="false"><div class=" toc-subsection-title " aria-current=""><a class="text" href="/docs/user-guide/concepts/parsers/" tabindex="-1">Parsers</a></div></li><li role="treeitem" aria-selected="false"><div class=" toc-subsection-title " aria-current=""><a class="text" href="/docs/user-guide/concepts/rules/" tabindex="-1">Rules</a></div></li></ul></li><li role="treeitem" aria-label="subsection" tabindex="0" aria-expanded="false"><div class=" toc-section-title "><span class="text">further configuration</span> <span class="icon"></span></div><ul role="group"><li role="treeitem" aria-selected="false"><div class=" toc-subsection-title " aria-current=""><a class="text" href="/docs/user-guide/further-configuration/sonarwhalrc-formats/" tabindex="-1">.sonarwhalrc formats</a></div></li><li role="treeitem" aria-selected="false"><div class=" toc-subsection-title " aria-current=""><a class="text" href="/docs/user-guide/further-configuration/browser-context/" tabindex="-1">Browser configuration</a></div></li><li role="treeitem" aria-selected="false"><div class=" toc-subsection-title " aria-current=""><a class="text" href="/docs/user-guide/further-configuration/ignoring-domains/" tabindex="-1">Ignoring domains</a></div></li><li role="treeitem" aria-selected="false"><div class=" toc-subsection-title " aria-current=""><a class="text" href="/docs/user-guide/further-configuration/rules-timeout/" tabindex="-1">Rules timeout</a></div></li><li role="treeitem" aria-selected="false"><div class=" toc-subsection-title " aria-current=""><a class="text" href="/docs/user-guide/further-configuration/website-authentication/" tabindex="-1">Website authentication</a></div></li></ul></li><li role="treeitem" aria-label="subsection" tabindex="0" aria-expanded="true"><div class=" toc-section-title--active "><span class="text">rules</span> <span class="icon"></span></div><ul role="group"><li role="treeitem" aria-selected="false"><div class=" toc-subsection-title " aria-current=""><a class="text" href="/docs/user-guide/rules/rule-amp-validator/" tabindex="0">AMP HTML Validator</a></div></li><li role="treeitem" aria-selected="false"><div class=" toc-subsection-title " aria-current=""><a class="text" href="/docs/user-guide/rules/rule-axe/" tabindex="0">Accessibility assessment with aXe</a></div></li><li role="treeitem" aria-selected="false"><div class=" toc-subsection-title " aria-current=""><a class="text" href="/docs/user-guide/rules/rule-no-http-redirects/" tabindex="0">Avoid HTTP redirects in requests</a></div></li><li role="treeitem" aria-selected="false"><div class=" toc-subsection-title " aria-current=""><a class="text" href="/docs/user-guide/rules/rule-no-disallowed-headers/" tabindex="0">Disallow certain HTTP headers</a></div></li><li role="treeitem" aria-selected="false"><div class=" toc-subsection-title " aria-current=""><a class="text" href="/docs/user-guide/rules/rule-manifest-file-extension/" tabindex="0">Disallow non-standard file extension for the web app manifest file</a></div></li><li role="treeitem" aria-selected="false"><div class=" toc-subsection-title " aria-current=""><a class="text" href="/docs/user-guide/rules/rule-no-protocol-relative-urls/" tabindex="0">Disallow protocol-relative URLs</a></div></li><li role="treeitem" aria-selected="false"><div class=" toc-subsection-title " aria-current=""><a class="text" href="/docs/user-guide/rules/rule-no-friendly-error-pages/" tabindex="0">Disallow small error pages</a></div></li><li role="treeitem" aria-selected="false"><div class=" toc-subsection-title " aria-current=""><a class="text" href="/docs/user-guide/rules/rule-no-html-only-headers/" tabindex="0">Disallow unneeded HTTP headers for non-HTML resources</a></div></li><li role="treeitem" aria-selected="true"><div class=" toc-subsection-title--active " aria-current="location"><a class="text" href="/docs/user-guide/rules/rule-http-cache/" tabindex="0">HTTP Cache</a></div></li><li role="treeitem" aria-selected="false"><div class=" toc-subsection-title " aria-current=""><a class="text" href="/docs/user-guide/rules/rule-image-optimization-cloudinary/" tabindex="0">Image optimization with Cloudinary</a></div></li><li role="treeitem" aria-selected="false"><div class=" toc-subsection-title " aria-current=""><a class="text" href="/docs/user-guide/rules/rule-no-vulnerable-javascript-libraries/" tabindex="0">No vulnerable libraries</a></div></li><li role="treeitem" aria-selected="false"><div class=" toc-subsection-title " aria-current=""><a class="text" href="/docs/user-guide/rules/rule-html-checker/" tabindex="0">Nu HTML Test</a></div></li><li role="treeitem" aria-selected="false"><div class=" toc-subsection-title " aria-current=""><a class="text" href="/docs/user-guide/rules/rule-performance-budget/" tabindex="0">Performance budget</a></div></li><li role="treeitem" aria-selected="false"><div class=" toc-subsection-title " aria-current=""><a class="text" href="/docs/user-guide/rules/rule-content-type/" tabindex="0">Require `Content-Type` HTTP response header with appropriate value</a></div></li><li role="treeitem" aria-selected="false"><div class=" toc-subsection-title " aria-current=""><a class="text" href="/docs/user-guide/rules/rule-strict-transport-security/" tabindex="0">Require `Strict-Transport-Security` response header</a></div></li><li role="treeitem" aria-selected="false"><div class=" toc-subsection-title " aria-current=""><a class="text" href="/docs/user-guide/rules/rule-x-content-type-options/" tabindex="0">Require `X-Content-Type-Options` HTTP response header</a></div></li><li role="treeitem" aria-selected="false"><div class=" toc-subsection-title " aria-current=""><a class="text" href="/docs/user-guide/rules/rule-meta-theme-color/" tabindex="0">Require a &apos;theme-color&apos; meta tag with a valid value</a></div></li><li role="treeitem" aria-selected="false"><div class=" toc-subsection-title " aria-current=""><a class="text" href="/docs/user-guide/rules/rule-manifest-exists/" tabindex="0">Require a web app manifest file</a></div></li><li role="treeitem" aria-selected="false"><div class=" toc-subsection-title " aria-current=""><a class="text" href="/docs/user-guide/rules/rule-apple-touch-icons/" tabindex="0">Require an apple touch icon</a></div></li><li role="treeitem" aria-selected="false"><div class=" toc-subsection-title " aria-current=""><a class="text" href="/docs/user-guide/rules/rule-meta-charset-utf-8/" tabindex="0">Require charset meta tag with the value of `utf-8`</a></div></li><li role="treeitem" aria-selected="false"><div class=" toc-subsection-title " aria-current=""><a class="text" href="/docs/user-guide/rules/rule-disown-opener/" tabindex="0">Require external links to disown opener</a></div></li><li role="treeitem" aria-selected="false"><div class=" toc-subsection-title " aria-current=""><a class="text" href="/docs/user-guide/rules/rule-highest-available-document-mode/" tabindex="0">Require highest available document mode</a></div></li><li role="treeitem" aria-selected="false"><div class=" toc-subsection-title " aria-current=""><a class="text" href="/docs/user-guide/rules/rule-manifest-app-name/" tabindex="0">Require manifest to specify the web site/app name</a></div></li><li role="treeitem" aria-selected="false"><div class=" toc-subsection-title " aria-current=""><a class="text" href="/docs/user-guide/rules/rule-http-compression/" tabindex="0">Require resources to be served compressed</a></div></li><li role="treeitem" aria-selected="false"><div class=" toc-subsection-title " aria-current=""><a class="text" href="/docs/user-guide/rules/rule-sri/" tabindex="0">Require scripts and styles to use subresource integrity</a></div></li><li role="treeitem" aria-selected="false"><div class=" toc-subsection-title " aria-current=""><a class="text" href="/docs/user-guide/rules/rule-manifest-is-valid/" tabindex="0">Require valid manifest</a></div></li><li role="treeitem" aria-selected="false"><div class=" toc-subsection-title " aria-current=""><a class="text" href="/docs/user-guide/rules/rule-meta-viewport/" tabindex="0">Require viewport meta tag with proper value</a></div></li><li role="treeitem" aria-selected="false"><div class=" toc-subsection-title " aria-current=""><a class="text" href="/docs/user-guide/rules/rule-ssllabs/" tabindex="0">SSL Server Test</a></div></li><li role="treeitem" aria-selected="false"><div class=" toc-subsection-title " aria-current=""><a class="text" href="/docs/user-guide/rules/rule-validate-set-cookie-header/" tabindex="0">Validate `Set-Cookie` Header</a></div></li><li role="treeitem" aria-selected="false"><div class=" toc-subsection-title " aria-current=""><a class="text" href="/docs/user-guide/rules/rule-no-bom/" tabindex="0">Warn if the byte-order mark</a></div></li><li role="treeitem" aria-selected="false"><div class=" toc-subsection-title " aria-current=""><a class="text" href="/docs/user-guide/rules/rule-webpack-config/config-exists/" tabindex="0">`config-exists`</a></div></li><li role="treeitem" aria-selected="false"><div class=" toc-subsection-title " aria-current=""><a class="text" href="/docs/user-guide/rules/rule-webpack-config/is-installed/" tabindex="0">`is-installed`</a></div></li><li role="treeitem" aria-selected="false"><div class=" toc-subsection-title " aria-current=""><a class="text" href="/docs/user-guide/rules/rule-babel-config/is-valid/" tabindex="0">`is-valid`</a></div></li><li role="treeitem" aria-selected="false"><div class=" toc-subsection-title " aria-current=""><a class="text" href="/docs/user-guide/rules/rule-typescript-config/is-valid/" tabindex="0">`is-valid`</a></div></li><li role="treeitem" aria-selected="false"><div class=" toc-subsection-title " aria-current=""><a class="text" href="/docs/user-guide/rules/rule-webpack-config/is-valid/" tabindex="0">`is-valid`</a></div></li><li role="treeitem" aria-selected="false"><div class=" toc-subsection-title " aria-current=""><a class="text" href="/docs/user-guide/rules/rule-webpack-config/module-esnext-typescript/" tabindex="0">`module-esnext-typescript`</a></div></li><li role="treeitem" aria-selected="false"><div class=" toc-subsection-title " aria-current=""><a class="text" href="/docs/user-guide/rules/rule-webpack-config/modules-false-babel/" tabindex="0">`modules-false-babel`</a></div></li><li role="treeitem" aria-selected="false"><div class=" toc-subsection-title " aria-current=""><a class="text" href="/docs/user-guide/rules/rule-typescript-config/no-comments/" tabindex="0">`no-comments`</a></div></li><li role="treeitem" aria-selected="false"><div class=" toc-subsection-title " aria-current=""><a class="text" href="/docs/user-guide/rules/rule-webpack-config/no-devtool-in-prod/" tabindex="0">`no-devtool-in-prod`</a></div></li><li role="treeitem" aria-selected="false"><div class=" toc-subsection-title " aria-current=""><a class="text" href="/docs/user-guide/rules/rule-typescript-config/target/" tabindex="0">`target`</a></div></li><li role="treeitem" aria-selected="false"><div class=" toc-subsection-title " aria-current=""><a class="text" href="/docs/user-guide/rules/rule-babel-config/" tabindex="0">babel-config</a></div></li><li role="treeitem" aria-selected="false"><div class=" toc-subsection-title " aria-current=""><a class="text" href="/docs/user-guide/rules/rule-typescript-config/" tabindex="0">typescript-config</a></div></li><li role="treeitem" aria-selected="false"><div class=" toc-subsection-title " aria-current=""><a class="text" href="/docs/user-guide/rules/rule-webpack-config/" tabindex="0">webpack configuration rules set</a></div></li></ul></li></ul></div><div class="module module--primary wrap-text"> <h1 id="http-cache-sonarwhalrule-http-cache">HTTP Cache (<code>@sonarwhal/rule-http-cache</code>)<a href="#http-cache-sonarwhalrule-http-cache" class="headerlink" title="HTTP Cache (`@sonarwhal/rule-http-cache`)"></a></h1><p><code>http-cache</code> verifies that the page and all its resources follow a good,
sustainable caching strategy.</p>
<h2 id="why-is-this-important">Why is this important?<a href="#why-is-this-important" class="headerlink" title="Why is this important?"></a></h2><p>The right caching strategy can help improve site performance through:</p>
<ul>
<li>Shorter load times</li>
<li>Reduced bandwidth</li>
<li>Reduced server costs</li>
<li>Having predictable behavior across browsers</li>
</ul>
<p>Currently about ~50% of resources on the web can&#x2019;t be cached due to
their configuration:</p>
<p><img src="https://chart.googleapis.com/chart?chd=t:-1%7C49,51,100,100,51,51,51,51,51,51,100,50,50,50,50,50,50,50,51,51,51,50,50,50&amp;chxl=0:%7C+%7C12%2F16%7C+%7C1%2F17%7C+%7C2%2F17%7C+%7C3%2F17%7C+%7C4%2F17%7C+%7C5%2F17%7C+%7C6%2F17%7C+%7C7%2F17%7C+%7C8%2F17%7C+%7C9%2F17%7C+%7C10%2F17%7C+%7C11%2F17&amp;chxt=x&amp;chs=600x300&amp;cht=lxy&amp;chco=184852&amp;chxs=0,676767,11.5,0,lt,676767&amp;chxtc=0,8&amp;chm=N**+%,184852,0,1::2,12,,h::8&amp;chds=0,100,0,100&amp;chts=184852,24&amp;chtt=Cacheable+Resources&amp;chls=2&amp;chma=5,5,5,25" alt="Cacheable Resources"></p>
<p><a href="http://httparchive.org/about.php#maxage0" target="_blank" rel="nofollow noreferrer noopener">Source: http archive</a></p>
<h2 id="how-to-use-this-rule">How to use this rule?<a href="#how-to-use-this-rule" class="headerlink" title="How to use this rule?"></a></h2><p>To use it you will have to install it via <code>npm</code>:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install @sonarwhal/rule-http-cache</span><br></pre></td></tr></table></figure>
<p>Note: You can make <code>npm</code> install it as a <code>devDependency</code> using the <code>--save-dev</code>
parameter, or to install it globally, you can use the <code>-g</code> parameter. For
other options see
<a href="https://docs.npmjs.com/cli/install" target="_blank" rel="nofollow noreferrer noopener"><code>npm</code>&apos;s documentation</a>.</p>
<p>And then activate it via the <a href="https://sonarwhal.com/docs/user-guide/further-configuration/sonarwhalrc-formats/" target="_blank" rel="nofollow noreferrer noopener"><code>.sonarwhalrc</code></a>
configuration file:</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">{</span><br><span class="line">    &quot;connector&quot;: {...},</span><br><span class="line">    &quot;formatters&quot;: [...],</span><br><span class="line">    &quot;parsers&quot;: [...],</span><br><span class="line">    &quot;rules&quot;: {</span><br><span class="line">        &quot;http-cache&quot;: &quot;error&quot;</span><br><span class="line">    },</span><br><span class="line">    ...</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<h2 id="what-does-the-rule-check">What does the rule check?<a href="#what-does-the-rule-check" class="headerlink" title="What does the rule check?"></a></h2><p>This rule checks the configuration of the <code>cache-control</code> header to
validate that the page and resources have a good caching strategy:</p>
<ul>
<li>all requests have a <code>Cache-Control</code> header, otherwise the behavior
can change from browser to browser</li>
<li>main page should have a short cache (&lt;= 3 minutes) or not cache at all</li>
<li>static resources such as JavaScript, CSS, images, etc.:
<ul>
<li>have a long expiry value (&gt;= 1 year)</li>
<li>use the <code>immutable</code> directive</li>
<li>follow some kind of filename/path based revving, and not
one based on query string parameters (see: <a href="https://www.stevesouders.com/blog/2008/08/23/revving-filenames-dont-use-querystring/" target="_blank" rel="nofollow noreferrer noopener">problems with
proxys</a>)</li>
</ul></li>
</ul>
<p>The built-in regular expression for file revving is:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">/\/(\w|-|_)+(\.|-|_)\w+\.\w+$/i</span><br></pre></td></tr></table></figure>
<p>This will match urls like the following:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">https://example.com/assets/script.13b55av.js</span><br><span class="line">https://example.com/assets/script-2.13b55av.js</span><br><span class="line">https://example.com/assets/script_2-13b55av.js</span><br><span class="line">https://example.com/assets/sw_script_13b553442.js</span><br></pre></td></tr></table></figure>
<h3 id="examples-that-trigger-the-rule">Examples that <strong>trigger</strong> the rule<a href="#examples-that-trigger-the-rule" class="headerlink" title="Examples that **trigger** the rule"></a></h3><p><code>Cache-Control</code> header is not sent:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">HTTP/... 200 OK</span><br><span class="line"></span><br><span class="line">Content-Type: text/javascript; charset=utf-8</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>An invalid directive:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">HTTP/... 200 OK</span><br><span class="line"></span><br><span class="line">Cache-Control: invalid directive</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>An invalid directive-value pair:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">HTTP/... 200 OK</span><br><span class="line"></span><br><span class="line">Cache-Control: max-age=abc</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>Uses a directive that is not recommended:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">HTTP/... 200 OK</span><br><span class="line"></span><br><span class="line">Cache-Control: max-age=3600, must-revalidate</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>The combination of directives doesn&#x2019;t make sense:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">HTTP/... 200 OK</span><br><span class="line"></span><br><span class="line">Cache-Control: no-cache, max-age=3600</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>The page has a <code>max-age</code> value greater than 5 minutes</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">HTTP/... 200 OK</span><br><span class="line"></span><br><span class="line">Content-Type: text/html; charset=utf-8</span><br><span class="line">Cache-Control: max-age=300</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>A static resource has a <code>max-age</code> value less than 1 year:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">HTTP/... 200 OK</span><br><span class="line"></span><br><span class="line">Content-Type: text/javascript; charset=utf-8</span><br><span class="line">Cache-Control: max-age=3600</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>A static resource doesn&#x2019;t have the <code>immutable</code> directive:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">HTTP/... 200 OK</span><br><span class="line"></span><br><span class="line">Content-Type: text/javascript; charset=utf-8</span><br><span class="line">Cache-Control: max-age=31536000</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<h3 id="examples-that-pass-the-rule">Examples that <strong>pass</strong> the rule<a href="#examples-that-pass-the-rule" class="headerlink" title="Examples that **pass** the rule"></a></h3><p>A static resource with <code>max-age</code> greater than 1 year and the <code>immutable</code>
directive:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">HTTP/... 200 OK</span><br><span class="line"></span><br><span class="line">Content-Type: text/javascript; charset=utf-8</span><br><span class="line">Cache-Control: max-age=31536000, immutable</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>A page with <code>no-cache</code> :</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">HTTP/... 200 OK</span><br><span class="line"></span><br><span class="line">Content-Type: text/html; charset=utf-8</span><br><span class="line">Cache-Control: no-cache</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<h2 id="how-to-configure-the-server-to-pass-this-rule">How to configure the server to pass this rule<a href="#how-to-configure-the-server-to-pass-this-rule" class="headerlink" title="How to configure the server to pass this rule"></a></h2><!-- markdownlint-disable MD033 -->
<details><summary>How to configure Apache</summary>
<p>Enabling Apache to automatically add the <code>Cache-Control</code> header
(as well as the equivalent <code>Expires</code> header) can be done using the
<a href="https://httpd.apache.org/docs/current/mod/mod_expires.html#expiresactive" target="_blank" rel="nofollow noreferrer noopener"><code>ExpiresActive</code> directive</a>.</p>
<p><code>Cache-Control</code> header&#x2019;s <code>max-age</code> values can be set using the
<a href="https://httpd.apache.org/docs/current/mod/mod_expires.html#expiresdefault" target="_blank" rel="nofollow noreferrer noopener"><code>ExpiresDefault</code></a> and <a href="https://httpd.apache.org/docs/current/mod/mod_expires.html#expiresbytype" target="_blank" rel="nofollow noreferrer noopener"><code>ExpiresByType</code></a>
directives. Other values such as <code>immutable</code> can be set using the
<a href="https://httpd.apache.org/docs/current/mod/mod_headers.html#header" target="_blank" rel="nofollow noreferrer noopener"><code>Header</code></a> directive.</p>
<p>If you don&#x2019;t want to start from scratch, below is a generic starter
snippet that contains the necessary configurations to ensure that
commonly used file types are served with the appropriate <code>Cache-Control</code>
header, and thus, make your web site/app pass this rule.</p>
<p>Important notes:</p>
<ul>
<li>Do not use the following snippet if you are not doing filename revving.</li>
<li>The following relies on Apache being configured to have the correct
filename extensions to media types mappings (see Apache section from
<a href="../content-type/#how-to-configure-the-server-to-pass-this-rule"><code>content-type</code> rule</a>).</li>
</ul>
<figure class="highlight apache"><table><tr><td class="code"><pre><span class="line"><span class="section">&lt;IfModule mod_expires.c&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Automatically add the `Cache-Control` header (as well as the</span></span><br><span class="line">  <span class="comment"># equivalent `Expires` header).</span></span><br><span class="line"></span><br><span class="line">    <span class="attribute">ExpiresActive</span> <span class="literal">on</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># By default, inform user agents to cache all resources for 1 year.</span></span><br><span class="line"></span><br><span class="line">    <span class="attribute">ExpiresDefault</span>                                   <span class="string">&quot;access plus 1 year&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Overwrite the previous for file types whose content usually changes</span></span><br><span class="line">  <span class="comment"># very often, and thus, should not be cached for such a long period,</span></span><br><span class="line">  <span class="comment"># or at all.</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># AppCache manifest files</span></span><br><span class="line"></span><br><span class="line">        <span class="attribute">ExpiresByType</span> text/cache-manifest            <span class="string">&quot;access plus 0 seconds&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment"># /favicon.ico (cannot be renamed!)</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># [!] If you have access to the main Apache configuration</span></span><br><span class="line">        <span class="comment">#     file, you can match the root favicon exactly using the</span></span><br><span class="line">        <span class="comment">#     `&lt;Location&gt;` directive. The same cannot be done inside</span></span><br><span class="line">        <span class="comment">#     of a `.htaccess` file where only the `&lt;Files&gt;` directive</span></span><br><span class="line">        <span class="comment">#     can be used, reason why the best that can be done is match</span></span><br><span class="line">        <span class="comment">#     all files named `favicon.ico` (but that should work fine</span></span><br><span class="line">        <span class="comment">#     if filename/path based revving is used)</span></span><br><span class="line">        <span class="comment">#</span></span><br><span class="line">        <span class="comment"># See also: https://httpd.apache.org/docs/current/sections.html#file-and-web.</span></span><br><span class="line"></span><br><span class="line">        <span class="section">&lt;Files &quot;favicon.ico&quot;&gt;</span></span><br><span class="line">            <span class="attribute">ExpiresByType</span> image/x-icon               <span class="string">&quot;access plus 1 hour&quot;</span></span><br><span class="line">        <span class="section">&lt;/Files&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment"># Data interchange</span></span><br><span class="line"></span><br><span class="line">        <span class="attribute">ExpiresByType</span> application/atom+xml           <span class="string">&quot;access plus 1 hour&quot;</span></span><br><span class="line">        <span class="attribute">ExpiresByType</span> application/rdf+xml            <span class="string">&quot;access plus 1 hour&quot;</span></span><br><span class="line">        <span class="attribute">ExpiresByType</span> application/rss+xml            <span class="string">&quot;access plus 1 hour&quot;</span></span><br><span class="line"></span><br><span class="line">        <span class="attribute">ExpiresByType</span> application/json               <span class="string">&quot;access plus 0 seconds&quot;</span></span><br><span class="line">        <span class="attribute">ExpiresByType</span> application/ld+json            <span class="string">&quot;access plus 0 seconds&quot;</span></span><br><span class="line">        <span class="attribute">ExpiresByType</span> application/schema+json        <span class="string">&quot;access plus 0 seconds&quot;</span></span><br><span class="line">        <span class="attribute">ExpiresByType</span> application/vnd.geo+json       <span class="string">&quot;access plus 0 seconds&quot;</span></span><br><span class="line">        <span class="attribute">ExpiresByType</span> text/xml                       <span class="string">&quot;access plus 0 seconds&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment"># HTML</span></span><br><span class="line"></span><br><span class="line">        <span class="attribute">ExpiresByType</span> text/html                      <span class="string">&quot;access plus 0 seconds&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment"># - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># Where needed add `immutable` value to the `Cache-Control` header</span></span><br><span class="line"></span><br><span class="line">    <span class="section">&lt;IfModule mod_headers.c&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># Because `mod_headers` cannot match based on the content-type,</span></span><br><span class="line">        <span class="comment"># the following workaround needs to be done.</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># 1) Add the `immutable` value to the `Cache-Control` header</span></span><br><span class="line">        <span class="comment">#    to all resources.</span></span><br><span class="line"></span><br><span class="line">        <span class="attribute"><span class="nomarkup">Header</span></span> merge Cache-Control immutable</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 2) Remove the value for all resources that shouldn&apos;t be have it.</span></span><br><span class="line"></span><br><span class="line">        <span class="section">&lt;FilesMatch &quot;\.(appcache|cur|geojson|ico|json(ld)?|x?html?|topojson|xml)$&quot;&gt;</span></span><br><span class="line">            <span class="attribute"><span class="nomarkup">Header</span></span> edit Cache-Control immutable <span class="string">&quot;&quot;</span></span><br><span class="line">        <span class="section">&lt;/FilesMatch&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="section">&lt;/IfModule&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="section">&lt;/IfModule&gt;</span></span><br></pre></td></tr></table></figure>
<p>Also note that:</p>
<ul>
<li><p>The above snippet works with Apache <code>v2.2.0+</code>, but you need to
have <a href="https://httpd.apache.org/docs/current/mod/mod_expires.html" target="_blank" rel="nofollow noreferrer noopener"><code>mod_expires</code></a> and <a href="https://httpd.apache.org/docs/current/mod/mod_headers.html" target="_blank" rel="nofollow noreferrer noopener"><code>mod_headers</code></a>
<a href="https://github.com/h5bp/server-configs-apache/wiki/How-to-enable-Apache-modules" target="_blank" rel="nofollow noreferrer noopener">enabled</a>
in order for it to take effect.</p></li>
<li><p>If you have access to the <a href="https://httpd.apache.org/docs/current/configuring.html#main" target="_blank" rel="nofollow noreferrer noopener">main Apache configuration file</a> (usually called <code>httpd.conf</code>), you should add
the logic in, for example, a <a href="https://httpd.apache.org/docs/current/mod/core.html#directory" target="_blank" rel="nofollow noreferrer noopener"><code>&lt;Directory&gt;</code></a>
section in that file. This is usually the recommended way as
<a href="https://httpd.apache.org/docs/current/howto/htaccess.html#when" target="_blank" rel="nofollow noreferrer noopener">using <code>.htaccess</code> files slows down</a> Apache!</p>
<p>If you don&#x2019;t have access to the main configuration file (quite
common with hosting services), add the snippets in a <code>.htaccess</code>
file in the root of the web site/app.</p></li>
</ul>
<p></p></details>
<details><summary>How to configure IIS</summary><p></p>
<p>You can enable the <code>Cache-Control</code> and/or <code>Expire</code> headers on IIS using
the <a href="https://docs.microsoft.com/en-us/iis/configuration/system.webserver/staticcontent/clientcache" target="_blank" rel="nofollow noreferrer noopener"><code>&lt;clientCache&gt; element under &lt;staticContent&gt;</code></a>.</p>
<p><code>&lt;clientCache&gt;</code> will set the cache for all the configured static content
so you might want to use it in combination with the <code>&lt;location&gt;</code> element
and set different values depending on where the resources are in the file
system.</p>
<p>The following is an example that sets <code>cache-control: no-cache</code> for all
static resources and then overrides it for the files under the <code>static</code> folder
with <code>cache-control: max-age=31536000, immutable</code>:</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">system.webServer</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">staticContent</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">clientCache</span> <span class="attr">cacheControlMode</span>=<span class="string">&quot;DisableCache&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">staticContent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">system.webServer</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">location</span> <span class="attr">path</span>=<span class="string">&quot;static&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">system.webServer</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">staticContent</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">clientCache</span> <span class="attr">cacheControlMode</span>=<span class="string">&quot;UseMaxAge&quot;</span> <span class="attr">cacheControlMaxAge</span>=<span class="string">&quot;365.00:00:00&quot;</span> <span class="attr">cacheControlCustom</span>=<span class="string">&quot;immutable&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">staticContent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">system.webServer</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">location</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>In the example above you want to have your JavaScript, CSS, images, etc.
under the <code>static</code> folder, and your HTML elesewhere. If your static
content is in another folder change the path of <code>&lt;location path=&quot;static&quot;&gt;</code>
to the right one.</p>
<p>Important notes:</p>
<ul>
<li>Do not use the above snippet if you are not doing filename revving.</li>
<li>The above snippet works with IIS 7+.</li>
<li>You should use the above snippet in the <code>web.config</code> of your
application.</li>
</ul>
<p></p></details><p></p>
<!-- markdownlint-enable MD033 -->
<h2 id="can-the-rule-be-configured">Can the rule be configured?<a href="#can-the-rule-be-configured" class="headerlink" title="Can the rule be configured?"></a></h2><p>Yes, you can configure:</p>
<ul>
<li>the <code>max-age</code> values for the page and resources</li>
<li>the regular expressions used to know if the file is immutable or not</li>
</ul>
<h3 id="max-age"><code>max-age</code><a href="#max-age" class="headerlink" title="`max-age`"></a></h3><p>By default the recommended value for the page is <code>Cache-Control: no-cache</code>
or a <code>max-age</code> equal or less to 3 minutes. For the resources <code>max-age</code> should
be greater or equal to 1 year. You can change this as follows:</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&quot;http-cache&quot;: [&quot;error&quot;, {</span><br><span class="line">    &quot;maxAgeTarget&quot;: 300, // 5 minutes in seconds</span><br><span class="line">    &quot;maxAgeResource&quot;: 1576800 // 6 months in seconds</span><br><span class="line">}]</span><br></pre></td></tr></table></figure>
<h3 id="custom-regular-expressions-for-revving-files">Custom regular expressions for revving files<a href="#custom-regular-expressions-for-revving-files" class="headerlink" title="Custom regular expressions for revving files"></a></h3><p>If none on the built-in regular expressions work for your use case, you
can provide your own via the <code>revvingPatterns</code> property. This property
accepts an <code>Array</code> of escaped <code>RegExp</code>:</p>
<p>in then <a href="https://sonarwhal.com/docs/user-guide/further-configuration/sonarwhalrc-formats/" target="_blank" rel="nofollow noreferrer noopener"><code>.sonarwhalrc</code></a> file:</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">{</span><br><span class="line">    &quot;connector&quot;: {...},</span><br><span class="line">    &quot;formatters&quot;: [...],</span><br><span class="line">    &quot;rules&quot;: {</span><br><span class="line">        &quot;http-cache&quot;: [&quot;error&quot;, {</span><br><span class="line">            &quot;revvingPatterns&quot;: [&quot;\\/\\d+\\/\\w+\\.\\w{1,3}&quot;]</span><br><span class="line">        }],</span><br><span class="line">        ...</span><br><span class="line">    },</span><br><span class="line">    ...</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<p>Also pay attention to the escaping. The example above will validate
that static resources follow a convention similar to the following
one:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">https://example.com/assets/12345/script.js</span><br><span class="line">https://example.com/assets/12345/styles.css</span><br></pre></td></tr></table></figure>
<h2 id="further-reading">Further Reading<a href="#further-reading" class="headerlink" title="Further Reading"></a></h2><ul>
<li><a href="https://jakearchibald.com/2016/caching-best-practices/" target="_blank" rel="nofollow noreferrer noopener">caching best practices</a></li>
<li><a href="https://bitsup.blogspot.ro/2016/05/cache-control-immutable.html" target="_blank" rel="nofollow noreferrer noopener">Cache-Control: immutable</a></li>
<li><a href="https://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/http-caching" target="_blank" rel="nofollow noreferrer noopener">HTTP Caching - Google Web Fundamentals</a></li>
<li><a href="https://youtu.be/vAgKZoGIvqs?t=12m20s" target="_blank" rel="nofollow noreferrer noopener">How Well Do You Know the Web? (Google I/O&#x2019;17, video)</a></li>
</ul>
<!-- Link labels: -->
<!-- Apache links -->
<!-- IIS links -->
 </div></div><a href="#main" class="anchor-top" hidden aria-label="back to top">top</a></div></article>   </main><footer class="footer footer--home"><div class="footer-nav container"><div class="footer-nav__item"><p class="category"><a href="/scanner/">Scanner</a></p><ul></ul></div><div class="footer-nav__item"><p class="category"><a href="/docs/">Documentation</a></p><ul><li><a href="/docs/contributor-guide/">Contributor Guide</a></li><li><a href="/docs/user-guide/rules/">Rules</a></li><li><a href="/docs/user-guide/">User Guide</a></li></ul></div><div class="footer-nav__item"><p class="category"><a href="/about/">About</a></p><ul><li><a href="/about/faq/">FAQ</a></li><li><a href="/about/changelog/">Changelog</a></li><li><a href="/about/governance/">Governance</a></li><li><a href="https://js.foundation/community/code-of-conduct">Code of Conduct</a></li></ul></div><ul class="footer-nav__item social-list"><li class="github-icon"><a href="https://github.com/sonarwhal" aria-label="Follow sonarwhal on GitHub"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 25 25"><path class="github-icon-svg" d="M12.5.4C5.7.4.2 5.9.2 12.7c0 5.4 3.5 10 8.4 11.7.6.1.8-.3.8-.6v-2.1C6 22.4 5.3 20 5.3 20c-.6-1.4-1.4-1.8-1.4-1.8-1.1-.7.1-.7.1-.7 1.2.1 1.9 1.3 1.9 1.3 1.1 1.9 2.9 1.3 3.6 1 .1-.8.4-1.3.8-1.6-2.7-.3-5.6-1.4-5.6-6.1 0-1.3.5-2.4 1.3-3.3-.2-.4-.6-1.6 0-3.3 0 0 1-.3 3.4 1.3 1-.3 2-.4 3.1-.4 1 0 2.1.1 3.1.4C17.9 5.2 19 5.5 19 5.5c.7 1.7.2 2.9.1 3.3.8.9 1.3 2 1.3 3.3 0 4.7-2.9 5.8-5.6 6.1.4.4.8 1.1.8 2.3v3.4c0 .3.2.7.8.6 4.9-1.6 8.4-6.2 8.4-11.7C24.8 5.9 19.3.4 12.5.4"/></svg></a></li><li class="twitter-icon"><a href="https://twitter.com/narwhalnellie" aria-label="Follow sonarwhal on Twitter"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 25 24"><path class="twitter-icon-svg" d="M25 4.4c-.9.4-1.9.7-2.9.8 1-.6 1.8-1.6 2.2-2.8-1 .6-2.1 1-3.2 1.2-.9-1-2.2-1.6-3.7-1.6-2.8 0-5 2.3-5 5 0 .4 0 .8.1 1.2C8.3 8 4.6 6 2.1 2.9c-.4.8-.7 1.6-.7 2.6 0 1.8.9 3.3 2.2 4.2-.8-.1-1.5-.3-2.2-.7v.1c0 2.4 1.7 4.5 4.1 5-.4.1-.9.2-1.3.2-.3 0-.6 0-.9-.1.6 2 2.5 3.5 4.7 3.5-1.9 1.3-4 2.1-6.4 2.1-.4 0-.8 0-1.2-.1C2.6 21.2 5.3 22 8.1 22c9.3 0 14.4-7.7 14.4-14.4v-.7c1-.6 1.8-1.5 2.5-2.5"/></svg></a></li><li class="medium-icon"><a href="https://medium.com/sonarwhal" aria-label="Follow sonarwhal on Medium"><svg xmlns="http://www.w3.org/2000/svg" viewbox="4 2 40 40"><path d="M5 40V5h35v35H5zm8.56-12.63c0 .56-.03.7-.32 1.03l-2.45 3v.38h6.9v-.4l-2.4-2.98c-.3-.34-.35-.5-.35-1.03v-8.95l6.13 13.36h.7L27 18.42v10.64c0 .3 0 .35-.2.53L25 31.4v.37h9.2v-.4l-1.82-1.8c-.2-.17-.22-.23-.22-.52v-13.1c0-.3.03-.36.2-.54l1.83-1.8v-.32h-6.5L23.1 24.8l-5.2-11.55h-6.8v.4l2.14 2.63c.24.3.3.37.3.77V27.4z" class="medium-icon-svg"/></svg></a></li></ul></div></footer><script src="/static/scripts/treeview-e14923d6bd.js" integrity="sha384-f4cDTA+aFtC3QxumypR+xrziAyyNLALeZLCcS4ZXdc/O93x/9Xyk/IzcUOmkNBDY" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js" integrity="sha384-bpcisN7hXHzDmg5JLgtPet7fpev9Wwwqgw8zlXpOh7AkvJ+wYjwrMzHH8fVvq1Dq" crossorigin="anonymous"></script><script src="/static/scripts/common-234f1d98cc.js" integrity="sha384-uQNhTpxyfsvKX1WnECKzm/7fYOFRWjGPmomV8W31O1ZNYBQWBcYpjjO4OqmpZ4M6" crossorigin="anonymous"></script><script>!function(){var e,t=docsearch({apiKey:"2ee58f908e6d720c4f72a9645ce0e857",indexName:"sonarwhal",inputSelector:"#search-input",appId:"0R8E5SPAFP",debug:!1,handleSelected:function(t,o,n){window.innerWidth<e?o.target.closest("form").submit():window.location.href=n.url}}),o=document.querySelector(".algolia-autocomplete .ds-dropdown-menu");e=parseInt(window.getComputedStyle(o).minWidth),t.autocomplete.on("autocomplete:opened",function(){document.body.clientWidth<e&&t.autocomplete.autocomplete.close()})}()</script><script src="/sw-reg.js" integrity="sha384-gRovFrJVkjTNXoDUATy5auNPBtLX1kLAiFPr0Y0558FvYta2yNWP955eXf8tv0KU" crossorigin="anonymous"></script><script>!function(e,a,t,c,g){e.GoogleAnalyticsObject="ga",e.ga||(e.ga=function(){(e.ga.q=e.ga.q||[]).push(arguments)}),e.ga.l=+new Date,c=a.createElement("script"),g=a.scripts[0],c.src="https://www.google-analytics.com/analytics.js",g.parentNode.insertBefore(c,g)}(this,document),ga("create","UA-101540923-1"),ga("send","pageview")</script></body></html>